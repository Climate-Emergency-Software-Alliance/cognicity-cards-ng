import { Component, OnInit } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import * as $ from 'jquery';

@Component({
  selector: 'app-terms-and-policies-popup',
  templateUrl: './terms-and-policies.component.html',
  styleUrls: ['./terms-and-policies.component.scss'],
})
export class TermsAndPoliciesPopupComponent implements OnInit {
  termscontents = [
    {
      tab_key: 'u_a',
      tab_name: 'terms.termsOfService',
      tab_content_en: '<div class="policies"><h1>Terms of Service</h1><p>These Terms of Service (“TOS”) govern your access to and use of AafatInfo.pk (“Platform”), including but not limited to, all information, content, and functionality available through the AafatInfo.pk website. By accessing or using AafatInfo.pk, or by contributing any information, text, links, graphics, photos, videos, or other materials ("Content") to the platform, you actively consent to and agree to be bound by these Terms of Service. "You" refers to any individual or entity accessing, browsing, or using AafatInfo.pk or contributing Content to the Platform.</p><h2>1. About AafatInfo.pk</h2><h3>1.1 Overview:</h3><p>AafatInfo/AafatInfo.pk is a project of the Community Climate Design Research and Development Foundation (“CCDRDF”), a non-profit organization registered under Section 42 of the Companies Act with the Securities and Exchange Commission of Pakistan (“SECP”). AafatInfo.pk is a member of Climate Emergency Software Alliance (CESA) and operates using CogniCity Open Source Software (OSS). Throughout this Agreement, CCDRDF, CESA, and CogniCity OSS are collectively referred to as “we” or “us.” AafatInfo.pk is supported by the re:arc institute.</p><h3>1.2 System Testing:</h3><p>The system is currently being tested at https://dev.aafatinfo.pk. The main platform, https://aafatinfo.pk, will become fully operational following a user testing phase and subsequent improvements.</p><h3>1.3 Purpose:</h3><p>AafatInfo.pk collects Rain Reports from users to provide and disseminate real-time information on urban flooding conditions by locations. The goal is to assist residents and decision-makers in better responding to urban flooding conditions.</p><h2>2. User Contributions and Content</h2><h3>2.1 Rain Reports Submission:</h3><p>You may submit reports on rain conditions using the AafatInfo.pk Rain Report Card. To access a Report Card, you can request a one-time link from the AafatInfo.pk Automated Program ("Bot") through WhatsApp. Rain Reports submitted by you will be added to the publicly available live information-sharing system at https://dev.aafatinfo.pk/map.</p><h3>2.2 Public Data Sharing:</h3><p>Rain Reports may include, but are not limited to, the following data, which will be shared publicly:</p><ul><li>Your location at the time of the report.</li></ul><h3>2.3 User Responsibility:</h3><p>You are solely responsible for any Content you provide to AafatInfo.pk. You must not add any Content owned by someone else, including photos, without explicit permission from the copyright holder. By submitting a Rain Report, you represent and warrant that you have all rights, licenses, consents, and permissions necessary to submit the Content of the Rain Report and to grant us the rights described below.</p><h3>2.4 Content Accuracy:</h3><p>While we make every effort to ensure the accuracy and reliability of the information shared on AafatInfo.pk, some Content may be inaccurate, incomplete, or outdated. We depend on contributors to provide accurate and thorough information, but we cannot guarantee the accuracy, completeness, or reliability of any Content, including Rain Reports or other information posted on AafatInfo.pk. We do not independently verify the accuracy of this Content. Your use of or reliance on any Content available on AafatInfo.pk is at your own risk, and we are not liable for any damages or losses arising from such reliance.</p><h3>2.5 Prohibited Activities:</h3><p>You agree not to engage in any of the following activities while using AafatInfo.pk:</p><ul><li>Submitting false, misleading, or inaccurate information;</li><li>Uploading or transmitting any software viruses, worms, or other harmful code;</li><li>Engaging in any form of harassment, abuse, or discriminatory behavior toward other users; and</li><li>Attempting to interfere with or disrupt the operation of AafatInfo.pk or its associated services.</li></ul><h3>2.6 Compliance with IT Laws:</h3><p>You agree to comply with all applicable laws and regulations of the Islamic Republic of Pakistan, including the Prevention of Electronic Crimes Act (PECA) 2016, the Pakistan Telecommunication (Re-organization) Act 1996, and any other relevant laws governing the use of online services, content, and data protection. Any content that may be considered blasphemous, obscene, or otherwise illegal under the laws of Pakistan will be removed if reported. You agree not to post, share, or distribute any such content on the platform.</p><h3>2.7 Right to Reject or Remove Reports:</h3><p>AafatInfo.pk reserves the right to reject or remove any Rain Report from the site at any time and for any reason.</p><h2>3 Licensing and Intellectual Property</h2><h3>3.1 Licensing:c</h3><p>We do not claim ownership of the Content you submit in a Rain Report. However, by submitting a Rain Report, you grant us a worldwide, royalty-free, non-exclusive, perpetual, irrevocable license to use, distribute, and display your Rain Report and the Content included in it.</p><h3>3.2 Creative Commons Attribution 4.0 International License:</h3><p>By submitting a Rain Report, you agree that the Content will be licensed under the Creative Commons Attribution 4.0 International License. This license allows others to copy, distribute, and use the Content of your Rain Report, provided they give appropriate credit to the original source. For more details, please see the license at https://creativecommons.org/licenses/by/4.0/.</p><h3>3.3 Open Source Software:</h3><p>AafatInfo.pk is supported by CogniCity Open Source Software and is provided without any warranty. For more details on the licensing terms of the software.</p><h3>3.4 Trademark Notice:</h3><p>"AafatInfo" is a trademark of CCDRDF. You are not permitted to use this trademark, Aafat Info or AafatInfo.pk without prior written consent from CCDRDF or CESA except as required to access or use the services provided by AafatInfo.pk.</p><h2>4. Copyright Infringement:</h2><h3>4.1 Reporting Copyright Infringement:</h3><p>If you believe that copyrighted material has been inappropriately added to AafatInfo.pk, please contact our designated copyright agent at contact@aafatinfo.pk or via mail at:<span>Community Climate Design<sup>RDF</sup></span><span>Ground Floor, 75-Q, Block 2, PECHS,</span><span>Karachi, Sindh 07544, Pakistan.</span>Your notification must include the following information:</p><ul><li>Identification of the copyrighted material you believe has been infringed.</li><li>Identification of the infringing material, including sufficient information for us to locate it (e.g., URL, IP address, or specific page details).</li><li>Your contact information (e.g., email address, phone number).</li><li>A statement that you believe the use of the material is not authorized by the copyright owner or an authorized agent.</li><li>A statement that the information provided in your notification is accurate and that you are the copyright owner or are authorized to act on their behalf.</li></ul><h2>5. Privacy and Data Protection</h2><h3>5.1 Data Privacy:</h3><p>We respect your privacy and are committed to protecting your personal information. For details about the data we collect, how we use it, and the measures we take to protect your data, please refer to our Privacy Policy.</p><h2>6. Disclaimer; Limitation of Liability</h2><h3>6.1 Disclaimer of Warranties:</h3><p>AafatInfo.pk, including any information, content, or services made available on or through the site, is provided on an "as is" and "as available" basis. We disclaim all warranties of any kind (express, implied, or otherwise), including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, and non-infringement. We do not warrant that the site will operate uninterrupted or error-free or that it will be free from viruses or other harmful components, except to the extent that such warranties cannot be disclaimed under applicable law.</p><h3>6.2 Limitation of Liability:</h3><p>Except to the extent prohibited by applicable law, we shall not be liable for, and expressly disclaim all liability for, any loss, injury, or damage arising from or related to the use of AafatInfo.pk and the Content available on the site. This exclusion of liability includes, but is not limited to, any special, incidental, consequential, punitive, or exemplary damages, such as loss of revenue, data, or anticipated profits, regardless of how and when such damages might occur. This exclusion applies even if we have been advised of the possibility of such damages.</p><h3>6.3 Liability Cap:</h3><p>If liability cannot be excluded by law, our liability is limited to actual and direct financial losses that are conclusively proven to have been caused by our own negligence.</p><h2>7. Indemnification</h2><h3>7.1 Indemnification Clause:</h3><p>You agree to defend, indemnify, and hold harmless each of us, as well as our respective subsidiaries, affiliates, officials, officers, faculty, students, fellows, governing board members, agents, and employees, from and against any third-party claims, actions, or demands arising out of, resulting from, or in any way related to your use of AafatInfo.pk. This includes any liability or expense arising from all claims, losses, damages (both actual and consequential), suits, judgments, litigation costs, and attorneys\' fees of every kind and nature. In the event of such a claim, suit, or action, we will provide you with written notice of the claim.</p><h2>8. Feedback and Suggestions</h2><h3>8.1 Feedback:</h3><p>If you provide us with any feedback or suggestions regarding AafatInfo.pk, you grant us a worldwide, perpetual, irrevocable, royalty-free license to use and incorporate such feedback into the platform without any obligation to compensate you.</p><h2>9. Miscellaneous</h2><h3>9.1 Governing Law:</h3><p>This Agreement will be governed by and construed in accordance with the laws of Pakistan, without regard to its conflict of law provisions. If any provision of this Agreement is found to be unenforceable, that provision\'s invalidity will not affect the validity of the remaining portions of this Agreement.</p><h3>9.2 Entire Agreement:</h3><p>This Agreement, along with our Privacy Policy, constitutes the entire agreement between you and us, superseding any prior or contemporaneous agreements, whether written, oral, or otherwise, related to the subject matter herein. We may amend this Agreement from time to time without notice; however, such amendments will not affect your use of or contributions to AafatInfo.pk made before the amendment\'s effective date. You are encouraged to review this Agreement each time you use AafatInfo.pk or submit a Rain Report to ensure you understand the terms that apply.</p><h3>9.3 Waiver and Severability:</h3><p>Our failure to exercise or enforce any right or provision of these TOS shall not constitute a waiver of that right or provision. If any provision of these TOS is deemed invalid by a court of competent jurisdiction, the parties agree that the court should endeavor to give effect to the parties\' intentions as reflected in the provision, and the remaining provisions of these TOS will remain in full force and effect.</p><h3>9.4 Force Majeure:</h3><p>AafatInfo.pk shall not be liable for any failure or delay in performance of its obligations under these Terms of Service due to events beyond its reasonable control, including but not limited to acts of God, war, terrorism, government actions (including internet shutdowns or restrictions), natural disasters, strikes, or other similar events.</p><h2>10. Contact Information</h2><h3>10.1 Contact Us:</h3><p>If you have any questions about these Terms of Service or the practices of AafatInfo.pk, please contact us at: contact@aafatinfo.pk or via mail at:<span> Community Climate Design<sup>RDF</sup> </span><span> Ground Floor, 75-Q, Block 2, PECHS, </span><span> Karachi, Sindh 07544, Pakistan. </span></p><span> Effective Date: September 5th, 2024 </span></div>',
      tab_content_id: '',
    },
    {
      tab_key: 'p_p',
      tab_name: 'terms.privacyPolicy',
      tab_content_en:
        '<div class="policies"><h1>Privacy Policy</h1><p>Welcome to AafatInfo.pk, a website that collects and shares urban flooding information from residents and government agencies, helping to reduce risk during urban flooding events. AafatInfo/AafatInfo.pk is a project of the Community Climate Design Research and Development Foundation (“CCDRDF”), member of Climate Emergency Software Alliance (“CESA”) and operates using CogniCity Open Source Software (“OSS”). Throughout this Privacy Policy, CCDRDF, CESA, and CogniCity OSS are collectively referred to as “we” or “us.” We are committed to respecting the privacy of users who access the AafatInfo.pk website (the "Site," which includes all pages within the AafatInfo.pk domain). "You" refers to any individual or entity accessing, browsing, or using AafatInfo.pk or contributing any information, text, links, graphics, photos, videos, or other materials (“Content”) to the Site.</p><h2>1. Web Server Logs</h2><h3>1.1 Information Collected:</h3><p>When you visit the Site, including submitting Rain Reports, our web server may collect the following information in its logs:</p><ul><li>Your IP address</li><li>URLs you have requested to access</li><li>Dates and methods of requests</li><li>Status code of your requests</li><li>URLs of referring websites</li><li>Number of bytes transferred</li><li>Your web browser and operating system</li><li>Your location (if you provide it)</li><li>Your preferred language (based on browser settings)</li><li>Your social messaging account username or user identification number</li></ul><h3>1.2 Use of Collected Information:</h3><p>We use server log information to diagnose technical issues, administer the Site, analyze Site usage patterns, and tailor content to user needs. Logs are retained for up to 30 days, after which they are deleted from our systems. Unless required by law, we do not link IP addresses to personally identifiable information, ensuring user anonymity.</p><h3>1.3 Third-Party Access:</h3><p>In limited cases, we may share server log data with third parties, such as consultants or service providers, for technical support or legal compliance.</p><h2>2. User-Generated Content:</h2><h3>2.1 Submission of Content:</h3><p>You may submit content (e.g., Rain Reports) via AafatInfo.pk’s social messaging bot on platforms such as WhatsApp or Facebook. Registration is not required to use these services; however, we collect your social media username or ID to facilitate the service and confirm receipt of your report. Please note that any user-generated content you post to the Site will be publicly accessible to all visitors. Therefore, do not submit any information you do not wish to make publicly available.</p><h3>2.2 Content Removal:</h3><p>If you wish to have any of your user-generated content removed, you can request deletion by contacting our support team at contact@aafatinfo.pk. We will evaluate your request and, where appropriate, remove the content in accordance with legal obligations.</p><h2>3. Compliance with Islamic Republic of Pakistan Laws:</h2><h3>3.1 Data Protection Laws:</h3><p>We comply with Pakistan\'s Prevention of Electronic Crimes Act, 2016 (“PECA”), which governs our data protection and privacy practices. We ensure that data sharing with third parties complies with legal requirements and that your personal data is protected.</p><h3>3.2 User Rights:</h3><p>Under PECA, users have the right to access, rectify, or erase their personal information. To exercise these rights, please contact us at contact@aafatinfo.pk.</p><h3>3.3 Personal Data Protection Act (“PDPA”):</h3><p>While the Personal Data Protection Act has not yet been enacted, we are preparing to align with its requirements once it is passed. We will update this Privacy Policy to reflect any changes needed for compliance.</p><h2>4. Research Access to Data</h2><h3>4.1 Use for Academic Research:</h3><p>In addition to providing urban flooding information to residents, government and disaster-response agencies, AafatInfo.pk facilitates academic research into risk reduction. Any content you post may be used for academic purposes, but this will only be done using anonymized data, ensuring that no personally identifiable information is included in research outputs.</p><h2>5. Programming Analytics</h2><h3>5.1 Internal Analytics:</h3><p>In order to refine the resources on offer through the Site and to optimize AafatInfo.pk programming, AafatInfo.pk may elect to conduct internal analytics of content submitted by users. Any such internal analytics will be conducted on an anonymized set of user-generated content.</p><h2>6. Google Analytics</h2><h3>6.1 Data Collected by Google Analytics:</h3><p>We use Google Analytics software to perform Site usage analytics. Google Analytics collects anonymous information from users to help us track Site usage and referrals from other websites. These data are used primarily to optimize the Site experience for our visitors, but we may also use the data to assist us in marketing the Site. Information collected and processed by Google Analytics includes the users:</p><ul><li>IP address;</li><li>network location; and</li><li>geographic location.</li></ul><h3>6.2: Cookies and Control:</h3><p>Google Analytics acquires all its information directly from the user, by installing a cookie (see below) on JavaScript-enabled computers. The Site does not share any information it collects with Google, and Google does not collect any personally identifiable information.</p><h2>7. Cookies</h2><h3>7.1 Use of Cookies:</h3><p>Cookies are small files stored on your computer when you visit websites. They help track your usage patterns and improve your browsing experience. We use cookies for the following purposes:</p><ul><li>To improve user experience</li><li>To gather anonymous analytics data (as noted above, Google Analytics)</li></ul><h3>7.2 Managing Cookies:</h3><p>You can manage or disable cookies via your browser settings, but this may affect your ability to use some features of the Site.</p><h2></h2><h3>8.1 No Sale of Information:</h3><p>We do not sell, rent, or share your personally identifiable information with third parties, except as discussed in this Policy or required by law or legal process.</p><h3>8.2 Sharing for Operational Purposes:</h3><p>We may disclose information to CCDRDF, CESA and CogniCity OSS employees, consultants and agents who have a legitimate need to know the information for the purpose of fixing or improving the Site and monitoring and improving the security of our network</p><h3>8.3 Legal Compliance:</h3><p>If legally required (such as through a subpoena or court order or investigation), or if necessary to protect our legal rights, we may disclose information to law enforcement or regulatory authorities without notice to you.</p><h2>9. Links to Other Websites:</h2><h3>9.1 Third-Party Links:</h3><p>This Site may contain links to other web resources, including websites of organizations other than CCDRDF, CESA and CogniCity OSS. The websites to which the Site links may also install cookies on your computer, log your access to their web pages, or collect user-identifying information directly from you, once you proceed to those sites. We are not responsible for the privacy practices of other sites to which the Site links. The privacy policies on those sites, if any, will govern your use of the sites.</p><h2>10. Data Security:</h2><h3>10.1 Security Measures:</h3><p>We take appropriate physical, electronic, and managerial precautions to safeguard your data. However, no security system is foolproof. We cannot completely guarantee the security of our database, nor can we guarantee that the information you supply will not be intercepted while being transmitted to us over the Internet.</p><h2>11. Changes to the Privacy Policy:</h2><h3>11.1 Notification of Policy Updates:</h3><p>We periodically review and update our security measures and Privacy Policy. If we change our Privacy Policy, we will post it on the Site. We encourage you to review our Privacy Policy on a regular basis.</p><h2>12. Contact Information:</h2><h3>12.1 Contact Us:</h3><p>If you have any questions about this Privacy Policy, the practices of this Site, or your dealings with this Site, you can contact us at; contact@aafatinfo.pk or via mail at: Community Climate Design<sup>RDF</sup></p><p><span> Ground Floor, 75-Q, Block 2, PECHS, </span><span> Karachi, Sindh 07544, Pakistan. </span></p><span>Effective Date: September 5th, 2024</span></div>',
      tab_content_id: '',
    },
  ];

  tabContent = '';

  constructor(public translate: TranslateService) {}

  async ngOnInit() {
    this.switchTab(this.termscontents[0].tab_key);
  }

  closeTerms() {
    $('#termsPopup').hide();
  }
  showTerms() {
    $('#termsPopup').show();
  }

  switchTab(key) {
    var lang = this.translate.currentLang;

    this.termscontents.forEach((element) => {
      if (element.tab_key === key)
        this.tabContent = element['tab_content_' + lang];
      else $('.' + element.tab_key).removeClass('active');
    });
    $('.' + key).addClass('active');
  }
}
